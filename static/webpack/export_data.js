!function(u){function e(e){for(var t,n,r=e[0],a=e[1],o=e[2],i=0,l=[];i<r.length;i++)n=r[i],Object.prototype.hasOwnProperty.call(f,n)&&f[n]&&l.push(f[n][0]),f[n]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(u[t]=a[t]);for(d&&d(e);l.length;)l.shift()();return s.push.apply(s,o||[]),c()}function c(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==f[o]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var n={},f={10:0},s=[];function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return u[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=u,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/static/webpack/";var t=(r=window.webpackJsonp=window.webpackJsonp||[]).push.bind(r);r.push=e;for(var r=r.slice(),a=0;a<r.length;a++)e(r[a]);var d=t;s.push([1448,0]),c()}({101:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(116),u=n(199);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){var n,r=0;for(n in e)n!==String(t)&&(r+=1);return r}var r=function(){function e(){var v=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addDataListeners=new Set,this.removeDataListeners=new Set,this.removeTemplateListeners=new Set,this.localStorageItem=new a.a("cart"),window.addEventListener("storage",function(e){if(e.storageArea===localStorage&&"bridge"===e.key){var t=JSON.parse(e.newValue),e=v.localStorageItem.value;if("addId"===t.type){var n,r=h(e[t.tid],t.id),a=Number(t.tid),o=Number(t.id),i=String(t.title),l=p(v.addDataListeners);try{for(l.s();!(n=l.n()).done;)(0,n.value)(o,i,a,0===r)}catch(e){l.e(e)}finally{l.f()}}else if("removeId"===t.type){var u,c=Number(t.tid),f=Number(t.id),s=p(v.removeDataListeners);try{for(s.s();!(u=s.n()).done;)(0,u.value)(f,c)}catch(e){s.e(e)}finally{s.f()}}else if("removeTemplate"===t.type){var d,m=Number(t.tid),y=p(v.removeTemplateListeners);try{for(y.s();!(d=y.n()).done;)(0,d.value)(m)}catch(e){y.e(e)}finally{y.f()}}}})}var t,n,r;return t=e,r=[{key:"Instance",get:function(){return this.instance||(this.instance=new this)}}],(n=[{key:"AddData",value:function(e,t,n){var r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];console.log("add: ".concat(e,", title: ").concat(t));var a=this.localStorageItem.value||{},o=!1;a.hasOwnProperty(n)||(o=!0,a[n]={}),Object(u.a)(n),a[n][e]=t,this.localStorageItem.value=a;var i,l=p(this.addDataListeners);try{for(l.s();!(i=l.n()).done;)(0,i.value)(e,t,n,o)}catch(e){l.e(e)}finally{l.f()}r&&localStorage.setItem("bridge",JSON.stringify({type:"addId",tid:n,id:e,title:t}))}},{key:"RemoveData",value:function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=this.localStorageItem.value;if(r.hasOwnProperty(t)&&r[t].hasOwnProperty(e))if(0!==h(r[t],e)){delete r[t][e],this.localStorageItem.value=r;var a,o=p(this.removeDataListeners);try{for(o.s();!(a=o.n()).done;)(0,a.value)(e,t)}catch(e){o.e(e)}finally{o.f()}n&&localStorage.setItem("bridge",JSON.stringify({type:"removeId",tid:t,id:e}))}else this.RemoveTemplate(t)}},{key:"RemoveTemplate",value:function(e){var t=this.localStorageItem.value;if(t.hasOwnProperty(e)){delete t[e],this.localStorageItem.value=t;var n,r=p(this.removeTemplateListeners);try{for(r.s();!(n=r.n()).done;)(0,n.value)(e)}catch(e){r.e(e)}finally{r.f()}localStorage.setItem("bridge",JSON.stringify({type:"removeTemplate",tid:e}))}}},{key:"HasData",value:function(e){return-1!==this.GetDataList().indexOf(e)}},{key:"AddOnAddDataListener",value:function(e){this.addDataListeners.add(e)}},{key:"AddOnRemoveDataListener",value:function(e){this.removeDataListeners.add(e)}},{key:"AddOnRemoveTempalteListener",value:function(e){this.removeTemplateListeners.add(e)}},{key:"RemoveOnAddDataListener",value:function(e){this.addDataListeners.delete(e)}},{key:"RemoveOnRemoveDataListener",value:function(e){this.removeDataListeners.delete(e)}},{key:"RemoveOnRemoveTempalteListener",value:function(e){this.removeTemplateListeners.delete(e)}},{key:"GetTemplateList",value:function(){var e,t=[],n=this.localStorageItem.value;if(null==n)return[];for(e in n)n.hasOwnProperty(e)&&t.push(Number(e));return t}},{key:"GetDataList",value:function(e){var t=this.localStorageItem.value;if(null!=t){var n=[];if(null!=e){if(!t.hasOwnProperty(e))return;for(var r in t[e])t[e].hasOwnProperty(r)&&n.push(Number(r))}else for(var a in t)if(t.hasOwnProperty(a))for(var o in t[a])t[a].hasOwnProperty(o)&&n.push(Number(o));return n}}},{key:"GetDataTitle",value:function(e,t){var n=this.localStorageItem.value;if(n.hasOwnProperty(t)&&n[t].hasOwnProperty(e))return n[t][e]}}])&&o(t.prototype,n),r&&o(t,r),e}()},1448:function(e,t,n){n(87),n(88),n(90),e.exports=n(1515)},1451:function(e,t,n){},1515:function(e,t,n){"use strict";n.r(t);n(29);var k,r=n(6),T=n.n(r),a=(n(34),n(11)),D=n.n(a),t=(n(145),n(38)),M=n.n(t),r=(n(105),n(26)),P=n.n(r),a=(n(121),n(45)),L=n.n(a),C=n(0),N=n.n(C),t=n(13),r=n.n(t),_=n(2),R=n(114),G=n(200),F=n(64),J=n(83),a=(n(143),n(61)),m=n.n(a);t=k=k||{},(a=t.Target||(t.Target={}))[a.File=0]="File",a[a.OCPMDM=1]="OCPMDM",(t=t.FileType||(t.FileType={})).Excel="XLSX",t.JSON="JSON",t.XML="XML",t.CSV="CSV";n(1451);var y=n(48);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e){var t=v(Object(C.useState)(k.Target.File),2),n=t[0],r=t[1],a=(t=v(Object(C.useState)(k.FileType.Excel),2))[0],o=t[1],i=(t=v(Object(C.useState)(!1),2))[0],l=t[1],u=(t=v(Object(C.useState)(!1),2))[0],c=t[1],f=((t=v(Object(C.useState)(null),2))[0],t[1]),s=(t=v(Object(C.useState)(null),2))[0],d=t[1];return Object(C.useEffect)(function(){e.refresh()}),Object(C.useEffect)(function(){console.log(e.singleTemplate),e.singleTemplate||(r(k.Target.File),c(!1),l(!1))},[e.singleTemplate]),Object(C.useEffect)(function(){d(null),null!=e.templateID&&(f(null),d([]),Object(y.c)(e.templateID).then(function(e){f(e.content)}))},[e.templateID]),t=function(){if(u){if(null==s)return;if(0===s.length)return}e.onExportClick({target:n,fileType:a,isFlat:i,isPartial:u,fieldPath:s})},N.a.createElement("div",{style:{display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center"}},N.a.createElement("div",{style:{textAlign:"center",marginBottom:"50px"}},N.a.createElement("div",{className:"ConfigView__header"},N.a.createElement(_.a,{id:"export:file_format",defaultMessage:"导出文件格式"})),N.a.createElement("div",{className:"ConfigView__body"},N.a.createElement(M.a.Group,{value:a,buttonStyle:"solid",onChange:function(e){return o(e.target.value)}},N.a.createElement(M.a.Button,{value:k.FileType.Excel},"Excel"),N.a.createElement(M.a.Button,{value:k.FileType.JSON},"JSON"),N.a.createElement(M.a.Button,{value:k.FileType.XML},"XML")))),N.a.createElement("div",{style:{textAlign:"center",margin:"8px"}},e.no_data?N.a.createElement(m.a,{title:"请至少选择一条数据"},N.a.createElement(T.a,{size:"large",style:{width:"240px"},loading:e.loading,disabled:e.loading||e.no_data,onClick:t},N.a.createElement(_.a,{id:"export",defaultMessage:"导出"}))):N.a.createElement(T.a,{size:"large",style:p,loading:e.loading,disabled:e.loading||e.no_data,onClick:t},N.a.createElement(_.a,{id:"export",defaultMessage:"导出"}))))}var p={width:"240px",backgroundColor:"#1088e9",textAlign:"center",color:"white"},t=(n(110),n(27)),i=n.n(t),t=(n(280),n(100)),c=n.n(t),f=n(101),s=n(199),d=n(3);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function b(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(t){return N.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row"}},N.a.createElement("div",{style:{flexGrow:1,overflow:"hidden"}},t.title),N.a.createElement("div",{style:{flexGrow:0}},N.a.createElement(i.a,{type:"close",onClick:function(e){e.stopPropagation(),t.onDelete()}})))}function $(r){function a(){o(!0),r.refresh();var n=f.a.Instance.GetTemplateList();s.a.apply(void 0,b(n)).then(function(e){var i=n.map(function(t){return{id:t,title:e.Get(String(t)),data:f.a.Instance.GetDataList(t).map(function(e){return{id:e,title:f.a.Instance.GetDataTitle(e,t)}})}});u(i),o(!1);var l=new Set,t=r.selected.filter(function(e){var t,n=h(i);try{for(n.s();!(t=n.n()).done;){var r,a=t.value,o=h(a.data);try{for(o.s();!(r=o.n()).done;)if(r.value.id===e)return l.add(a.id),!0}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}return!1});r.update(t,l.size<2,1===l.size?l.values().next().value:null)}),0===i.length&&l(!0)}var e=g(Object(C.useState)(!0),2),t=e[0],o=e[1],i=(n=g(Object(C.useState)([]),2))[0],u=n[1],n=(e=g(Object(C.useState)(!1),2))[0],l=e[1];return Object(C.useEffect)(function(){a()},[]),Object(C.useEffect)(function(){function e(){a()}function t(){a()}function n(){a()}return f.a.Instance.AddOnAddDataListener(e),f.a.Instance.AddOnRemoveDataListener(t),f.a.Instance.AddOnRemoveTempalteListener(n),function(){f.a.Instance.RemoveOnAddDataListener(e),f.a.Instance.RemoveOnRemoveDataListener(t),f.a.Instance.RemoveOnRemoveTempalteListener(n)}}),N.a.createElement("div",{style:{padding:"0 32px"}},n?N.a.createElement("div",{style:{textAlign:"center"}},"无数据"):N.a.createElement("div",null),t?N.a.createElement("div",null):N.a.createElement(c.a,{onCheck:function(e){0===i.length&&l(!0),console.log(e);var t=e.filter(function(e){return e.startsWith("t")}),n=e.filter(function(e){return!e.startsWith("t")}).map(Number),e=1===t.length?Number(t[0].slice(1)):null;r.update(n,t.length<2,e)},blockNode:!0,selectable:!1,expandedKeys:i.map(function(e){return"t".concat(e.id)}),checkable:!0,checkedKeys:r.selected.map(String)},i.map(function(r){var e=N.a.createElement(w,{title:r.title,onDelete:function(){var e;e=r.id,f.a.Instance.RemoveTemplate(e)}});return N.a.createElement(S,{title:e,key:"t".concat(r.id)},r.data.map(function(n){var e=N.a.createElement("a",{target:"_blank",style:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},href:d.b.storage.show_data(n.id),onClick:function(e){n.id,e.stopPropagation()}},f.a.Instance.GetDataTitle(n.id,r.id));return N.a.createElement(S,{title:N.a.createElement(w,{title:e,onDelete:function(){var e,t;e=n.id,t=r.id,f.a.Instance.RemoveData(e,t)}}),key:String(n.id)})}))})))}var S=c.a.TreeNode,E=n(93),t=(n(197),n(92)),O=n.n(t),j=n(25),x=n(50);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(u){var e=A(Object(C.useState)(null),2),c=e[0],t=e[1];function n(e,t,n){var r=new Set(u.selectedDataList);t?r.add(e):r.delete(e);var a,o=new Set([]),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=I(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}(c.download.data.include);try{for(i.s();!(a=i.n()).done;){var l=a.value;r.has(l.id)&&o.add(l.template)}}catch(e){i.e(e)}finally{i.f()}1<o.size?u.update("data",Array.from(r),null):u.update("data",Array.from(r),Array.from(o)[0])}return Object(C.useEffect)(function(){Object(j.e)(u.value.id).then(function(e){t(e)})},[]),e=u.selected?"#1890ff":"#E9E9E9",N.a.createElement("div",{style:{margin:"8px 0",padding:"8px",border:"2px solid ".concat(e),borderRadius:"4px",cursor:"pointer",position:"relative"}},N.a.createElement("div",{onClick:u.onClick},N.a.createElement("span",{style:{fontWeight:"bold"}},N.a.createElement(_.a,{id:"data:keywords",defaultMessage:"关键词"})," "),"：",u.value.value,N.a.createElement("a",{style:{float:"right",color:"red",marginLeft:"8px"},href:"javascript:void(0)",onClick:function(e){e.stopPropagation(),Object(E.d)(u.value.id)}},N.a.createElement(_.a,{id:"dash:delete",defaultMessage:"删除"})),N.a.createElement("a",{style:{float:"right"},target:"_blank",href:"".concat(d.b.search.index,"#/").concat(u.value.id,"/"),onClick:function(e){e.stopPropagation()}},N.a.createElement(_.a,{id:"export:view",defaultMessage:"检索详情"}))),N.a.createElement("div",{style:{height:u.selected?"auto":"0",transition:"height 0.3s ease-in-out",overflow:"hidden"}},u.selected?N.a.createElement("div",null,null==c?N.a.createElement(x.a,null):N.a.createElement("div",null,N.a.createElement(_.a,{id:"data",defaultMessage:"数据"}),N.a.createElement("div",null,c.download.data.include.map(function(t){return N.a.createElement(O.a,{onChange:function(e){return n(t.id,e.target.checked,t.template)},key:t.id,style:{display:"block",marginLeft:0},checked:u.selectedDataList.includes(t.id)},t.title,"（数据ID：",t.id,"）")})),N.a.createElement(_.a,{id:"template",defaultMessage:"模板"}),N.a.createElement("div",null,N.a.createElement(M.a.Group,{value:u.selectedTemplate,onChange:function(e){e.stopPropagation(),u.update("template",[],e.target.value)}},c.download.template.include.map(function(e){return N.a.createElement(M.a,{style:X,key:e.id,value:e.id},e.title)}))))):null))}var X={display:"block",height:"30px",lineHeight:"30px"};function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(r){var e=z(Object(C.useState)([]),2),t=e[0],n=e[1];function a(e,t,n){r.update(e,r.selected,t,n)}return Object(C.useEffect)(function(){n(Object(E.b)())},[]),Object(C.useEffect)(function(){function e(){n(Object(E.b)())}return Object(E.a)(e),function(){Object(E.c)(e)}}),N.a.createElement("div",{style:{margin:"16px"}},0!==t.length?null:N.a.createElement("div",{style:{textAlign:"center"}},N.a.createElement("a",{href:d.b.search.index},N.a.createElement(_.a,{id:"export:add",defaultMessage:"去搜索页面添加更多数据"}))),t.map(function(t){return N.a.createElement(K,{key:t.id,update:t.id===r.selected?a:function(){},selectedTemplate:t.id===r.selected?r.template:null,selectedDataList:t.id===r.selected?r.dataList:[],onClick:function(){var e;e=t.id,r.update("data",e,[],null)},value:t,selected:r.selected===t.id})}))}var q=n(154);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n=function(){function a(){0===o.length&&0===b.length&&null===w?O(!0):O(!1)}var e=H(Object(C.useState)("data"),2),n=e[0],t=e[1],r=H(Object(C.useState)([]),2),o=r[0],i=r[1],l=H(Object(C.useState)(!1),2),u=l[0],c=l[1],f=H(Object(C.useState)(null),2),s=f[0],d=f[1],m=H(Object(C.useState)("data"),2),y=m[0],v=m[1],e=H(Object(C.useState)(null),2),p=e[0],h=e[1],r=H(Object(C.useState)([]),2),b=r[0],g=r[1],l=H(Object(C.useState)(null),2),w=l[0],S=l[1],f=H(Object(C.useState)(!1),2),m=f[0],E=f[1],e=H(Object(C.useState)(!1),2),r=e[0],O=e[1],l=H(Object(C.useState)(!1),2),f=l[0],j=l[1],e=H(Object(C.useState)(N.a.createElement("div",null)),2),l=e[0],x=e[1],e=H(Object(C.useState)(""),2),A=e[0],I=e[1];Object(C.useEffect)(function(){});return N.a.createElement(F.a,{loginRequired:!0,reloadOnSwitchLocale:!0,selectedMenu:J.a.Export},N.a.createElement(R.a,null,N.a.createElement(G.a,{style:{display:"flex",flexDirection:"column"},title:N.a.createElement(_.a,{id:"export:data",defaultMessage:"数据导出"})},N.a.createElement(L.a,{style:{flexGrow:1,display:"flex",flexDirection:"row"}},N.a.createElement(P.a,{span:12,style:{display:"flex",flexDirection:"column",flexGrow:1}},N.a.createElement("div",{style:{textAlign:"center",margin:"8px 0"}},N.a.createElement(M.a.Group,{buttonStyle:"solid",value:n,onChange:function(e){e=e.target.value,t(e)}},N.a.createElement(M.a.Button,{value:"data"},N.a.createElement(_.a,{id:"data",defaultMessage:"来自单条数据浏览"})," "),N.a.createElement(M.a.Button,{value:"search"},N.a.createElement(_.a,{id:"search:result",defaultMessage:"来自搜索结果"})))),N.a.createElement("div",null,"data"===n?N.a.createElement($,{selected:o,refresh:a,update:function(e,t,n){i(e),c(t),d(n),a()}}):N.a.createElement(W,{update:function(e,t,n,r){v(e),h(t),g(n),S(r),a()},mode:y,selected:p,dataList:b,template:w}))),N.a.createElement(P.a,{span:12,style:{display:"flex",flexDirection:"column",flexGrow:1}},N.a.createElement(U,{onExportClick:function(e){E(!0);function t(e){var t=e.async?N.a.createElement("div",null,N.a.createElement("a",{href:"/task"},N.a.createElement(_.a,{id:"export:task",defaultMessage:"导出任务已添加，点此去任务页面查看进度！"}))):N.a.createElement("div",null,N.a.createElement("a",{href:e.result},N.a.createElement(_.a,{id:"export:task",defaultMessage:"导出完成，点此下载"}))),e=e.async?"/task":e.result;x(t),I(e),j(!0),E(!1)}"data"===n?0!==o.length&&Object(q.b)({fields:e.isPartial?e.fieldPath:void 0,toOCPMDM:e.target===k.Target.OCPMDM,dataIDs:o,format:e.fileType,flat:e.isFlat}).then(t).catch(function(){E(!1)}):"data"===y?0!==b.length&&Object(q.b)({fields:e.isPartial?e.fieldPath:void 0,toOCPMDM:e.target===k.Target.OCPMDM,dataIDs:b,format:e.fileType,flat:e.isFlat}).then(t).catch(function(){E(!1)}):Object(q.b)({fields:e.isPartial?e.fieldPath:void 0,toOCPMDM:e.target===k.Target.OCPMDM,dataIDs:b,format:e.fileType,flat:e.isFlat,query_id:p,tid:w}).then(t).catch(function(){E(!1)})},singleTemplate:"data"===n?u:null!==w,no_data:r,loading:m,refresh:a,templateID:"data"===n?s:w}))))),N.a.createElement(D.a,{title:N.a.createElement(_.a,{id:"export:success",defaultMessage:"导出成功"}),visible:f,footer:[N.a.createElement(T.a,{onClick:function(){j(!1)}},N.a.createElement(_.a,{id:"ok",defaultMessage:"确认"})),N.a.createElement(T.a,{onClick:function(){window.location.href=A}},N.a.createElement(_.a,{id:"jump",defaultMessage:"前往"}))]},l))};r.a.render(N.a.createElement(n,null),document.getElementById("wrap"))},199:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return y});var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.obj=e}var e,n,r;return e=t,(n=[{key:"Get",value:function(e){if(this.obj.hasOwnProperty(e))return this.obj[e];throw new Error("Dict: key ".concat(e," does not exist in object ").concat(this.obj))}},{key:"forEach",value:function(e){for(var t in this.obj)this.obj.hasOwnProperty(t)&&e(t,this.obj[t])}}])&&a(e.prototype,n),r&&a(e,r),t}(),o=n(4),i=n(3);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.storageKeyName=e}var e,n,r;return e=t,(n=[{key:"Get",value:function(e){var t=JSON.parse(localStorage.getItem(this.storageKeyName))||{};if(t.hasOwnProperty(e))return t[e]}},{key:"Set",value:function(e,t){var n=JSON.parse(localStorage.getItem(this.storageKeyName))||{};n[e]=t,localStorage.setItem(this.storageKeyName,JSON.stringify(n))}},{key:"FindMissing",value:function(e){var t,n=JSON.parse(localStorage.getItem(this.storageKeyName))||{},r=[],a=l(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;n.hasOwnProperty(String(o))||r.push(o)}}catch(e){a.e(e)}finally{a.f()}return r}}])&&c(e.prototype,n),r&&c(e,r),t}();function s(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function d(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function a(e){s(r,t,n,a,o,"next",e)}function o(e){s(r,t,n,a,o,"throw",e)}a(void 0)})}}function m(){return(m=d(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.length)return e.abrupt("return",new r({}));e.next=2;break;case 2:return n=i.b.api_v2_storage.template_names+"?list="+t.join(","),e.abrupt("return",Object(o.j)(n).then(function(e){return new r(e)}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(){return v.apply(this,arguments)}function v(){return(v=d(regeneratorRuntime.mark(function e(){var n,t,r,a,o,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new f("template-names"),t=i.length,r=new Array(t),a=0;a<t;a++)r[a]=i[a];return o=r.filter(function(e){return null==n.Get(String(e))}),e.next=5,function(){return m.apply(this,arguments)}(o);case 5:return e.sent.forEach(function(e,t){return n.Set(e,t)}),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}},60:function(e,t){e.exports=dll_library},93:function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"d",function(){return f}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return m});var i=n(116),l=n(115);function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=new Set;function a(e,t){for(var n=new i.a("saved_search",[]),r=!1,a=0;a<n.value.length;++a)if(n.value[a].id===e){r=!0;break}r||(n.value=[].concat(o(n.value),[{id:e,value:t}]),c.forEach(function(e){return e()}),localStorage.setItem("search_bridge","".concat(Object(l.a)())))}function f(e){var t,n=new i.a("saved_search",[]),r=[],a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}(n.value);try{for(a.s();!(t=a.n()).done;){var o=t.value;o.id!==e&&r.push(o)}}catch(e){a.e(e)}finally{a.f()}n.value=r,c.forEach(function(e){return e()}),localStorage.setItem("search_bridge","".concat(Object(l.a)()))}function s(){return new i.a("saved_search",[]).value}function d(e){c.add(e)}function m(e){c.delete(e)}window.addEventListener("storage",function(e){e.storageArea===localStorage&&"search_bridge"===e.key&&(console.log("trigger bridge"),c.forEach(function(e){return e()}))})}});