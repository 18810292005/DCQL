!function(c){function e(e){for(var t,n,r=e[0],a=e[1],o=e[2],i=0,l=[];i<r.length;i++)n=r[i],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&l.push(s[n][0]),s[n]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(c[t]=a[t]);for(p&&p(e);l.length;)l.shift()();return f.push.apply(f,o||[]),u()}function u(){for(var e,t=0;t<f.length;t++){for(var n=f[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==s[o]&&(r=!1)}r&&(f.splice(t--,1),e=i(i.s=n[0]))}return e}var n={},s={21:0},f=[];function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=c,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/static/webpack/";var t=(r=window.webpackJsonp=window.webpackJsonp||[]).push.bind(r);r.push=e;for(var r=r.slice(),a=0;a<r.length;a++)e(r[a]);var p=t;f.push([1507,0]),u()}({138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;Object.prototype.hasOwnProperty.call(e,n)&&((o=a?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(n(0)),r=n(36),o=u(n(61)),a=u(n(27)),f=u(n(6)),i=u(n(168)),l=u(n(277)),c=n(30);function u(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},n=function(){function r(e){var u,t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t=this,n=b(r).call(this,e),(u=!n||"object"!==m(n)&&"function"!=typeof n?h(t):n).onConfirm=function(e){u.setVisible(!1,e);var t=u.props.onConfirm;t&&t.call(h(u),e)},u.onCancel=function(e){u.setVisible(!1,e);var t=u.props.onCancel;t&&t.call(h(u),e)},u.onVisibleChange=function(e){u.props.disabled||u.setVisible(e)},u.saveTooltip=function(e){u.tooltip=e},u.renderOverlay=function(e,t){var n=u.props,r=n.okButtonProps,a=n.cancelButtonProps,o=n.title,i=n.cancelText,l=n.okText,c=n.okType,n=n.icon;return s.createElement("div",null,s.createElement("div",{className:"".concat(e,"-inner-content")},s.createElement("div",{className:"".concat(e,"-message")},n,s.createElement("div",{className:"".concat(e,"-message-title")},o)),s.createElement("div",{className:"".concat(e,"-buttons")},s.createElement(f.default,d({onClick:u.onCancel,size:"small"},a),i||t.cancelText),s.createElement(f.default,d({onClick:u.onConfirm,type:c,size:"small"},r),l||t.okText))))},u.renderConfirm=function(e){var t=e.getPrefixCls,n=u.props,r=n.prefixCls,e=n.placement,n=g(n,["prefixCls","placement"]),a=t("popover",r),r=s.createElement(i.default,{componentName:"Popconfirm",defaultLocale:l.default.Popconfirm},function(e){return u.renderOverlay(a,e)});return s.createElement(o.default,d({},n,{prefixCls:a,placement:e,onVisibleChange:u.onVisibleChange,visible:u.state.visible,overlay:r,ref:u.saveTooltip}))},u.state={visible:e.visible},u}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(r,s.Component),e=r,n=[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:"defaultVisible"in e?{visible:e.defaultVisible}:null}}],(t=[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"setVisible",value:function(e,t){var n=this.props;"visible"in n||this.setState({visible:e});n=n.onVisibleChange;n&&n(e,t)}},{key:"render",value:function(){return s.createElement(c.ConfigConsumer,null,this.renderConfirm)}}])&&y(e.prototype,t),n&&y(e,n),r}();n.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:s.createElement(a.default,{type:"exclamation-circle",theme:"filled"}),disabled:!1},(0,r.polyfill)(n),t.default=n},1507:function(e,t,n){n(87),n(88),n(90),e.exports=n(536)},244:function(e,t,n){"use strict";n(42),n(382),n(29)},536:function(e,t,n){"use strict";n.r(t),n.d(t,"SystemManagement",function(){return je});n(734);var r=n(231),d=n.n(r),g=n(0),j=n.n(g),a=n(13),t=n.n(a),r=(n(240),n(74)),o=n.n(r),a=n(18),r=n(19),i=n(2),l=n(132),c=n(99),u=n(115),s=n(341),f=(n(620),n(336));function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function y(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach(function(e){var t,n;t=r,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=O(n);return e=r?(e=O(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==p(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=o.a.Content,E=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,g["Component"]);var e,t,n,r=v(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={logged_in:!1,username:"",real_name:"",email:"",tel:"",sex:"",avatar:"",role:0,notifications:[],institution:"",fetched:!1,email_verified:!1,unread_count:0,informUpdate:t.informUpdate,managed_categories:[],avatarCount:0,logo:"",DBtitle:""},Object(f.a)("logo").then(function(e){t.setState({logo:e.file,DBtitle:e.content})}),t}return e=a,(t=[{key:"informUpdate",value:function(){var t=this;this.setState({avatarCount:this.state.avatarCount+1}),Object(l.a)().then(function(e){t.setState(y(y({},e),{},{logged_in:!0,fetched:!0}))}).catch(function(){t.setState({logged_in:!1,fetched:!0})})}},{key:"componentDidMount",value:function(){this.informUpdate()}},{key:"render",value:function(){var t=this,e=null;return this.props.titleID&&(e=j.a.createElement(i.a,{key:Object(u.a)(),id:this.props.titleID,defaultMessage:this.props.defaultTitle},function(e){return document.title=e,null})),j.a.createElement(s.a,{reloadOnSwitch:this.props.reloadOnSwitchLocale},j.a.createElement(c.a.Provider,{value:this.state},e,j.a.createElement(c.a.Consumer,null,function(e){return e.fetched&&!e.logged_in&&t.props.loginRequired,null}),j.a.createElement(o.a,{style:{minWidth:"700px"}},j.a.createElement(w,{className:"MgeLayout__content",style:null==this.props.contentStyle?{minWidth:"700px",paddingTop:"68px"}:Object.assign(this.props.contentStyle,{minWidth:"700px",paddingTop:"68px"})},this.props.children))))}}])&&b(e.prototype,t),n&&b(e,n),a}();Object(a.a)([r.a],E.prototype,"informUpdate",null);var _=n(5),S=n(3),x=n(4);function C(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function k(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function a(e){C(r,t,n,a,o,"next",e)}function o(e){C(r,t,n,a,o,"throw",e)}a(void 0)})}}function P(){return(P=k(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.b.api_v1_1_management.get_category,e.abrupt("return",Object(x.j)(t,"GET"));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return(T=k(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.b.api_v1_account.user_list,e.abrupt("return",Object(x.j)(t,"GET"));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(){return(D=k(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.b.api_v1_1_management.get_project,t+="?page_size=99999",e.abrupt("return",Object(x.j)(t,"GET"));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(){return(A=k(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.b.api_v1_1_management.get_subject,t+="?page_size=99999",e.abrupt("return",Object(x.j)(t,"GET"));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}n(244);var r=n(138),I=n.n(r),r=(n(123),n(46)),R=n.n(r),r=(n(29),n(6)),V=n.n(r),r=(n(82),n(35)),M=n.n(r),r=(n(41),n(9)),z=n.n(r),r=(n(34),n(11)),N=n.n(r),r=(n(44),n(10)),U=n.n(r),r=(n(70),n(17)),L=n.n(r);function B(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function W(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function a(e){B(r,t,n,a,o,"next",e)}function o(e){B(r,t,n,a,o,"throw",e)}a(void 0)})}}function $(){return($=W(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.b.api_v1_1_management.get_project,e.abrupt("return",Object(x.j)(n,"PATCH",t));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(){return(F=W(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.b.api_v1_1_management.get_subject,e.abrupt("return",Object(x.j)(n,"PATCH",t));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function K(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function a(e){G(r,t,n,a,o,"next",e)}function o(e){G(r,t,n,a,o,"throw",e)}a(void 0)})}}function H(){return(H=K(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.b.api_v1_1_management.get_project,e.abrupt("return",Object(x.j)(n,"POST",t));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(){return(J=K(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.b.api_v1_1_management.get_subject,e.abrupt("return",Object(x.j)(n,"POST",t));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(a){var e=q(Object(g.useState)(""),2),o=(e[0],e[1]),t=q(Object(g.useState)(""),2),t=(e=(t[0],t[1],q(Object(g.useState)(!1),2)))[0],n=e[1],r=(e=q(Object(g.useState)(!1),2))[0],i=e[1],l=(e=q(Object(g.useState)(""),2))[0],c=e[1],u=(e=q(Object(g.useState)(""),2))[0],s=e[1],f=(e=q(Object(g.useState)(""),2))[0],p=e[1],m=(e=q(Object(g.useState)(""),2))[0],d=e[1],y=(e=q(Object(g.useState)([]),2))[0],b=e[1],h=(e=q(Object(g.useState)(!1),2))[0],v=e[1];return Object(g.useEffect)(function(){if(a.modalData){c(a.modalData.id),s(a.modalData.id1),p(a.modalData.name),d(a.modalData.leader),o(a.modalData.responsible_expert),b(a.modalData.members_name);var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Q(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}(a.modalData.members);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.username)}}catch(e){n.e(e)}finally{n.f()}b(t),v(!1)}},[]),e=function(){var t;n(!0),(a.isCreate?function(){return H.apply(this,arguments)}({id:l,name:f}).then(function(){U.a.success({message:"添加成功"}),setTimeout(function(){n(!1),a.handleCancel(),window.location.reload()},800)}).catch(function(e){n(!1)}):function(){return $.apply(this,arguments)}(r?{new_id:h?u:l,id:l,name:f,leader_name:m,members_name:y}:{new_id:h?u:l,id:l,name:f,leader_name:(t=m,void a.user.map(function(e){if(e.real_name===t)return e.username})),members_name:y}).then(function(){U.a.success({message:"修改成功"}),setTimeout(function(){a.handleCancel(),n(!1),window.location.reload()},800)}).catch(function(e){n(!1)})).finally(function(){})},a.isCreate?j.a.createElement("div",null,j.a.createElement(N.a,{okText:"确认",cancelText:"取消",width:"50%",title:a.title,visible:a.visible,onOk:e,confirmLoading:t,onCancel:a.handleCancel},j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"请输入一级机构编号："),j.a.createElement(z.a,{style:{width:"40%"},onChange:function(e){c(e.target.value)}})),j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"请输入一级机构名称："),j.a.createElement(z.a,{style:{width:"40%"},onChange:function(e){p(e.target.value)}})))):j.a.createElement("div",null,j.a.createElement(N.a,{okText:"确认",cancelText:"取消",width:"50%",title:a.title,visible:a.visible,onOk:e,confirmLoading:t,onCancel:a.handleCancel},j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"请输入一级机构编码："),j.a.createElement(z.a,{style:{width:"40%"},defaultValue:a.modalData.id,onChange:function(e){s(e.target.value),v(!0)}})),j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"请输入一级机构名称："),j.a.createElement(z.a,{style:{width:"40%"},defaultValue:a.modalData.name,onChange:function(e){p(e.target.value)}})),j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"选择负责人："),j.a.createElement(L.a,{defaultValue:a.modalData.leader,style:{width:"40%"},onChange:function(e){d(e),i(!0)}},a.user.map(function(e){return j.a.createElement(Z,{value:e.username,key:e.username},e.real_name)}))),j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"选择一级机构管理成员："),j.a.createElement(L.a,{defaultValue:y,mode:"multiple",style:{width:"40%"},onChange:function(e){b(e)}},a.user.map(function(e){return j.a.createElement(Z,{value:e.username,key:e.username},e.real_name)}))),j.a.createElement("br",null),j.a.createElement("div",null,j.a.createElement("p",null,"注意： 一级机构负责人和管理成员将拥有所有二级机构下",j.a.createElement("strong",{style:{textDecoration:"underline"}},"非私有数据"),"的查看权限。负责人自动成为管理成员，无需手动添加。"))))}var Z=L.a.Option;function ee(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function te(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function a(e){ee(r,t,n,a,o,"next",e)}function o(e){ee(r,t,n,a,o,"throw",e)}a(void 0)})}}function ne(){return(ne=te(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.b.api_v1_1_management.get_project,r={id:t},e.abrupt("return",Object(x.j)(n,"DELETE",r));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(){return(re=te(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.b.api_v1_1_management.get_subject,r={id:t},e.abrupt("return",Object(x.j)(n,"DELETE",r));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(t){var e=(s=ae(Object(g.useState)(t.data),2))[0],n=s[1],r=(c=ae(Object(g.useState)(!1),2))[0],a=c[1],o=ae(Object(g.useState)(),2),i=o[0],l=o[1],c=(s=ae(Object(g.useState)(""),2))[0],u=s[1],s=(o=ae(Object(g.useState)(!1),2))[0],f=o[1];function p(e){!function(){return ne.apply(this,arguments)}(e).then(function(){return window.location.reload()})}return Object(g.useEffect)(function(){n(t.data)},[t.data]),o=function(){a(!1)},j.a.createElement(j.a.Fragment,null,r&&!s?j.a.createElement(Y,{isCreate:s,visible:r,totalData:e,handleCancel:o,modalData:i,user:t.user,title:c}):null,r&&s?j.a.createElement(Y,{isCreate:s,visible:r,user:t.user,totalData:e,handleCancel:o,title:c}):null,j.a.createElement(V.a,{type:"primary",style:{margin:"0 0 10px 10px"},onClick:function(){a(!0),f(!0),l(null),u("创建一级机构")}},Object(_.a)("manage:create_category","创建一级机构")),j.a.createElement(M.a,{locale:{emptyText:"暂无数据"},rowKey:"project",dataSource:e,loading:t.loading,pagination:{total:t.total,pageSize:t.pageSize},onChange:function(e){t.onPageChange(e.current)}},j.a.createElement(le,{align:"center",title:Object(_.a)("name","机构编码"),dataIndex:"id",key:"id"}),j.a.createElement(le,{align:"center",title:Object(_.a)("dash:title","名称"),dataIndex:"name",key:"name"}),j.a.createElement(le,{width:"10%",align:"center",title:Object(_.a)("dash:applicant","负责人"),dataIndex:"leader",key:"leader"}),j.a.createElement(le,{width:"20%",align:"center",title:Object(_.a)("manage:operation","操作"),render:function(t){return j.a.createElement("div",null,j.a.createElement(V.a,{type:"primary",onClick:function(){var e;e=t,a(!0),f(!1),l(e),u("修改一级机构")}},Object(_.a)("template:edit","修改")),j.a.createElement(R.a,{type:"vertical"}),j.a.createElement(I.a,{title:"确定删除？",okText:"是",cancelText:"否",onConfirm:function(){p(t.id)}},j.a.createElement(V.a,{type:"danger"},Object(_.a)("template:delete","删除"))))}})))}var le=M.a.Column;function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fe(a){var e=ce(Object(g.useState)(""),2),t=e[0],o=e[1],n=(d=ce(Object(g.useState)(""),2))[0],i=d[1],r=(e=ce(Object(g.useState)(""),2))[0],l=e[1],c=(d=ce(Object(g.useState)(),2))[0],u=d[1],s=(e=ce(Object(g.useState)(),2))[0],f=e[1],p=(d=ce(Object(g.useState)([]),2))[0],m=d[1],d=(e=ce(Object(g.useState)(!1),2))[0],y=e[1],b=(e=ce(Object(g.useState)(!1),2))[0],h=e[1];return Object(g.useEffect)(function(){if(a.modalData){u(a.modalData.project_id),o(a.modalData.id),i(a.modalData.id1),l(a.modalData.name),f(a.modalData.leader_fk),m(a.modalData.members_name);var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ue(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}(a.modalData.members);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.username)}}catch(e){n.e(e)}finally{n.f()}m(t),h(!1)}},[]),e=function(){y(!0),a.isCreate?function(){return J.apply(this,arguments)}({id:t,project_id:c,name:r}).then(function(){U.a.success({message:"添加成功"}),setTimeout(function(){y(!1),a.handleCancel(),window.location.reload()},800)}).catch(function(e){y(!1)}):function(){return F.apply(this,arguments)}({new_id:b?n:t,id:t,leader_name:s,members_name:p,name:r}).then(function(){U.a.success({message:"修改成功"}),setTimeout(function(){y(!1),a.handleCancel(),window.location.reload()},800)}).catch(function(e){y(!1)})},a.isCreate?j.a.createElement("div",null,j.a.createElement(N.a,{okText:"确认",cancelText:"取消",width:"50%",title:a.title,visible:a.visible,onOk:e,confirmLoading:d,onCancel:a.handleCancel},j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"选择所属一级机构："),j.a.createElement(L.a,{defaultValue:"选择一级机构",style:{width:"40%"},onChange:function(e){u(e)}},a.projects.map(function(e){return j.a.createElement(pe,{value:e.id,key:e.id},e.name,"(",e.id,")")}))),j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"请输入二级机构编号："),j.a.createElement(z.a,{style:{width:"40%"},onChange:function(e){o(e.target.value)}})),j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"请输入二级机构名称："),j.a.createElement(z.a,{style:{width:"40%"},onChange:function(e){l(e.target.value)}})))):j.a.createElement("div",null,j.a.createElement(N.a,{okText:"确认",cancelText:"取消",width:"50%",title:a.title,visible:a.visible,onOk:e,confirmLoading:d,onCancel:a.handleCancel},j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"选择所属一级机构："),j.a.createElement(L.a,{defaultValue:a.modalData.project_id,style:{width:"40%"},onChange:function(e){u(e)}},a.projects.map(function(e){return j.a.createElement(pe,{value:e.id,key:e.id},e.name)}))),j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"请输入二级机构编码："),j.a.createElement(z.a,{style:{width:"40%"},defaultValue:a.modalData.id,onChange:function(e){i(e.target.value),h(!0)}})),j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"请输入二级机构名称："),j.a.createElement(z.a,{style:{width:"40%"},defaultValue:a.modalData.name,onChange:function(e){l(e.target.value)}})),j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"选择负责人："),j.a.createElement(L.a,{defaultValue:a.modalData.leader,style:{width:"40%"},onChange:function(e){f(e)}},a.user.map(function(e){return j.a.createElement(pe,{value:e.username,key:e.username},e.real_name)}))),j.a.createElement("div",{style:{display:"flex"}},j.a.createElement("p",{style:{width:"40%"}},"编辑成员："),j.a.createElement(L.a,{defaultValue:p,mode:"multiple",style:{width:"40%"},onChange:function(e){m(e)}},a.user.map(function(e){return j.a.createElement(pe,{value:e.username,key:e.username},e.real_name)}))),j.a.createElement("br",null),j.a.createElement("div",null,j.a.createElement("p",null,"一、二级机构负责人自动成为成员，无需手动添加。"))))}var pe=L.a.Option;function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e){function n(e){!function(){return re.apply(this,arguments)}(e).then(function(){return window.location.reload()})}var t=(s=me(Object(g.useState)(e.data),2))[0],r=s[1],a=(c=me(Object(g.useState)(!1),2))[0],o=c[1],i=(p=me(Object(g.useState)(),2))[0],l=p[1],c=(s=me(Object(g.useState)(""),2))[0],u=s[1],s=(p=me(Object(g.useState)(!1),2))[0],f=p[1],p=function(){o(!1)};return Object(g.useEffect)(function(){r(e.data)},[e.data]),j.a.createElement(j.a.Fragment,null,a&&!s?j.a.createElement(fe,{projects:e.projects,isCreate:s,visible:a,totalData:t,handleCancel:p,modalData:i,user:e.user,title:c}):null,a&&s?j.a.createElement(fe,{projects:e.projects,isCreate:s,visible:a,totalData:t,handleCancel:p,user:e.user,title:c}):null,j.a.createElement(V.a,{type:"primary",style:{margin:"0 0 10px 10px"},onClick:function(){o(!0),f(!0),l(null),u("创建二级机构")}},Object(_.a)("manage:create_category","创建二级机构")),j.a.createElement(M.a,{locale:{emptyText:"暂无数据"},rowKey:"subject",dataSource:t,loading:e.loading,pagination:{total:e.total,pageSize:e.pageSize}},j.a.createElement(be,{align:"center",title:Object(_.a)("name_sub","二级机构编码"),dataIndex:"id",key:"id"}),j.a.createElement(be,{align:"center",title:Object(_.a)("dash:title","名称"),dataIndex:"name",key:"name"}),j.a.createElement(be,{align:"center",title:Object(_.a)("name","所属一级机构"),dataIndex:"project_name",key:"project_name"}),j.a.createElement(be,{width:"10%",align:"center",title:Object(_.a)("dash:applicant","负责人"),dataIndex:"leader",key:"leader"}),j.a.createElement(be,{width:"20%",align:"center",title:Object(_.a)("manage:operation","操作"),render:function(t){return j.a.createElement("div",null,j.a.createElement(V.a,{type:"primary",onClick:function(){var e;e=t,o(!0),f(!1),l(e),u("修改二级机构")}},Object(_.a)("template:edit","修改")),j.a.createElement(R.a,{type:"vertical"}),j.a.createElement(I.a,{title:"确定删除？",okText:"是",cancelText:"否",onConfirm:function(){n(t.id)}},j.a.createElement(V.a,{type:"danger"},Object(_.a)("template:delete","删除"))))}})))}var be=M.a.Column;function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge=d.a.Panel,je=function(){var e=he(Object(g.useState)({}),2),t=(e[0],e[1]),n=he(Object(g.useState)({}),2),r=n[0],a=n[1],o=he(Object(g.useState)({}),2),i=o[0],l=o[1],c=he(Object(g.useState)({}),2),e=c[0],u=c[1],n=he(Object(g.useState)(!0),2),s=(n[0],n[1]),o=he(Object(g.useState)(!0),2),f=(o[0],o[1]),c=he(Object(g.useState)(!0),2),n=c[0],p=c[1],o=he(Object(g.useState)(!0),2),c=o[0],m=o[1];return Object(g.useEffect)(function(){!function(){return P.apply(this,arguments)}().then(function(e){console.log(e),t(e),s(!1)}),function(){return T.apply(this,arguments)}().then(function(e){a(e),f(!1)}),function(){return D.apply(this,arguments)}().then(function(e){l(e),p(!1)}),function(){return A.apply(this,arguments)}().then(function(e){u(e),m(!1)})},[]),j.a.createElement(j.a.Fragment,null,j.a.createElement(E,null,j.a.createElement("div",{className:"sys_body",style:{marginTop:"-6.5%",background:"#fff",width:"100%"}},j.a.createElement(d.a,{defaultActiveKey:["project","subject"],key:"manage"},j.a.createElement(ge,{header:Object(_.a)("manage:material_project","一级机构管理"),key:"project"},j.a.createElement(ie,{total:i.total,pageSize:i.page_size,page:i.page,data:i.results,loading:n,user:r.results})),j.a.createElement(ge,{header:Object(_.a)("manage:material_subject","二级机构管理"),key:"subject"},j.a.createElement(ye,{total:e.total,pageSize:e.page_size,page:e.page,data:e.results,projects:i.results,loading:c,user:r.results}))))))};t.a.render(j.a.createElement(je,null),document.getElementById("wrap"))},60:function(e,t){e.exports=dll_library}});