var ge=Object.defineProperty,we=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var ce=(n,t,a)=>t in n?ge(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,de=(n,t)=>{for(var a in t||(t={}))xe.call(t,a)&&ce(n,a,t[a]);if(ie)for(var a of ie(t))Ve.call(t,a)&&ce(n,a,t[a]);return n},ne=(n,t)=>we(n,ke(t));var S=(n,t,a)=>new Promise((f,N)=>{var m=r=>{try{x(a.next(r))}catch(V){N(V)}},U=r=>{try{x(a.throw(r))}catch(V){N(V)}},x=r=>r.done?f(r.value):Promise.resolve(r.value).then(m,U);x((a=a.apply(n,t)).next())});import{d as De,i as w,h as _e,C as ue,B as Ce,ak as Se,j as qe,r as b,o as _,k as p,b as e,t as o,u as k,e as l,w as i,f as h,a as L,G as q,F as J,l as O,R as Ne,M as Ue,N as Be,ap as Fe,aq as Ie,z as Le,s as je,v as Re,_ as ze}from"./index-Dxllzmhq.js";import{b as Je}from"./index-11tLsVUs.js";import{v as Oe,r as Xe}from"./setData-BXCfuNPN.js";import{a as Ee}from"./transformation-Bi-fA-2P.js";const d=n=>(je("data-v-f49406b0"),n=n(),Re(),n),Me={class:"checkUserData topCenter"},Te={class:"checkUserData-title pl_20"},Ge=d(()=>e("div",{class:"border4"},null,-1)),$e={class:"title"},Ae={class:"basic"},He=d(()=>e("div",{class:"title"},"基本信息",-1)),Ke={class:"basic-row"},Pe={class:"basic-col"},Qe=d(()=>e("div",{class:"col-title"},"数据名称",-1)),We={class:"col-content"},Ye={class:"basic-col"},Ze=d(()=>e("div",{class:"col-title"},"一级机构名称",-1)),et={class:"basic-row"},tt={class:"basic-col"},st=d(()=>e("div",{class:"col-title"},"模板名称",-1)),lt={class:"col-content"},ot={class:"basic-col"},at=d(()=>e("div",{class:"col-title"},"一级机构编号",-1)),it={class:"basic-row"},ct={class:"basic-col"},dt=d(()=>e("div",{class:"col-title"},"创建时间",-1)),nt={class:"col-content"},_t={class:"basic-col"},ut=d(()=>e("div",{class:"col-title"},"二级机构名称",-1)),rt={class:"basic-row"},vt={class:"basic-col"},pt=d(()=>e("div",{class:"col-title"},"可见范围",-1)),ht={class:"col-content"},mt={class:"basic-col"},bt=d(()=>e("div",{class:"col-title"},"二级机构编号",-1)),ft={class:"basic-row"},yt={key:0,class:"basic-col"},gt=d(()=>e("div",{class:"col-title"},"提交人",-1)),wt={class:"basic-col"},kt=d(()=>e("div",{class:"col-title"},"审核状态",-1)),xt={class:"col-content"},Vt={key:0,style:{color:"rgb(229, 163, 3)"}},Dt={key:1,style:{color:"#358de3"}},Ct={key:2,style:{color:"#dd2c2c"}},St={class:"basic-row"},qt={class:"basic-col",style:{width:"100%"}},Nt=d(()=>e("div",{class:"col-title",style:{"margin-right":"10px"}},"关键词",-1)),Ut={class:"col-content"},Bt={class:"basic-row"},Ft={class:"basic-col",style:{width:"100%"}},It=d(()=>e("div",{class:"col-title"},"数据摘要",-1)),Lt={class:"col-content"},jt={class:"editor-container"},Rt={class:"download"},zt={class:"option"},Jt=d(()=>e("div",{style:{"padding-right":"10px"}},"下载内容",-1)),Ot={key:0,class:"option"},Xt=d(()=>e("div",{style:{"padding-right":"20px"}},"选择字段",-1)),Et={class:"option"},Mt=d(()=>e("div",{style:{"padding-right":"10px"}},"导出格式",-1)),Tt={class:"dialog-footer"},Gt=De({name:"checkUserData",__name:"checkUserData",setup(n){const t=w(),a=_e([]),f=_e([]);ue("editorFormData",f),ue("templateData",a);const N=u=>S(this,null,function*(){const c=yield Je(u);if(c.code===0){t.value=c.data;let v=Ue(c.data.template.content,!1);a.splice(0,a.length,...v),f.splice(0,f.length),a.map(R=>{f.push(ne(de({},R),{formId:Be(20),childern:[]}))}),Ee(v,c.data.content,f)}});let m=Ce(),U=Se();qe(()=>{console.log(m.query),N(m.query.id)});const x=u=>{var c;return console.log(u),(c=Oe.find(v=>v.value==u))==null?void 0:c.label},r=u=>{var c;return(c=Xe.find(v=>v.value==u))==null?void 0:c.label},V=()=>{U.go(-1)},re=()=>{U.push({name:"create",query:{id:m.query.id}})},B=w(!1),D=w(!0),F=w("JSON"),C=w([]),j=w(),ve=()=>S(this,null,function*(){B.value=!0;const u=yield Fe(t==null?void 0:t.value.template.id);u.code===0&&(j.value=u.data)}),pe=()=>S(this,null,function*(){D.value&&(C.value=[])}),X=()=>{F.value="JSON",B.value=!1,D.value=!0,j.value=[],C.value=[]},he=()=>S(this,null,function*(){const u=yield Ie({async:!1,flat:!1,format:F.value,included_fields:C.value,meta_id_list:[(t==null?void 0:t.value.id)+""],query_id:null,tid:null});u.code===0?(X(),window.open("https://mgetest.micl.com.cn"+u.data.result)):Le.error("下载失败")});return(u,c)=>{var M,T,G,$,A,H,K,P,Q,W,Y,Z,ee,te,se,le,oe,ae;const v=b("el-button"),R=b("el-divider"),me=b("el-tag"),y=b("el-descriptions-item"),z=b("el-descriptions"),I=b("el-radio-button"),E=b("el-radio-group"),be=b("el-checkbox"),fe=b("el-checkbox-group"),ye=b("el-dialog");return _(),p("div",Me,[e("div",Te,[Ge,e("div",$e,[e("div",null,o(k(m).query.type?"数据审核":"查看数据"),1),e("div",null,[l(v,{icon:"back",onClick:V},{default:i(()=>[h("返回")]),_:1}),!k(m).query.type&&!k(m).query.home?(_(),L(v,{key:0,plain:"",type:"primary",icon:"edit",onClick:re},{default:i(()=>[h(" 编辑数据 ")]),_:1})):q("",!0),k(m).query.type?q("",!0):(_(),L(v,{key:1,plain:"",type:"primary",icon:"download",onClick:ve},{default:i(()=>[h(" 数据下载 ")]),_:1}))])])]),l(R,{class:"bt_40"}),e("div",Ae,[He,e("div",Ke,[e("div",Pe,[Qe,e("div",We,o((M=t.value)==null?void 0:M.title),1)]),e("div",Ye,[Ze,e("div",null,o((T=t.value)==null?void 0:T.project_name),1)])]),e("div",et,[e("div",tt,[st,e("div",lt,o(($=(G=t.value)==null?void 0:G.template)==null?void 0:$.title),1)]),e("div",ot,[at,e("div",null,o((A=t.value)==null?void 0:A.project),1)])]),e("div",it,[e("div",ct,[dt,e("div",nt,o((H=t.value)==null?void 0:H.add_time),1)]),e("div",_t,[ut,e("div",null,o((K=t.value)==null?void 0:K.subject_name),1)])]),e("div",rt,[e("div",vt,[pt,e("div",ht,o(x((P=t.value)==null?void 0:P.visibility)),1)]),e("div",mt,[bt,e("div",null,o((Q=t.value)==null?void 0:Q.subject),1)])]),e("div",ft,[k(m).query.type?(_(),p("div",yt,[gt,e("div",null,o((W=t.value)==null?void 0:W.username),1)])):q("",!0),e("div",wt,[kt,e("div",xt,[((Y=t.value)==null?void 0:Y.review_state)==0?(_(),p("span",Vt,o(r((Z=t.value)==null?void 0:Z.review_state)),1)):((ee=t.value)==null?void 0:ee.review_state)==1?(_(),p("span",Dt,o(r((te=t.value)==null?void 0:te.review_state)),1)):(_(),p("span",Ct,o(r((se=t.value)==null?void 0:se.review_state)),1))])])]),e("div",St,[e("div",qt,[Nt,e("div",Ut,[(_(!0),p(J,null,O((le=t.value)==null?void 0:le.keywords,s=>(_(),L(me,{type:"info",class:"tag"},{default:i(()=>[h(o(s),1)]),_:2},1024))),256))])])]),e("div",Bt,[e("div",Ft,[It,e("div",Lt,o((oe=t.value)==null?void 0:oe.abstract),1)])])]),((ae=t.value)==null?void 0:ae.review_state)!=0?(_(),L(z,{key:0,title:"审核信息",column:1,style:{margin:"30px 0"}},{default:i(()=>[l(y,{label:"审核人"},{default:i(()=>{var s;return[h(o((s=t.value)==null?void 0:s.reviewer),1)]}),_:1}),l(y,{label:"审核单位"},{default:i(()=>{var s;return[h(o((s=t.value)==null?void 0:s.reviewer_ins),1)]}),_:1})]),_:1})):q("",!0),l(z,{title:"数据内容",column:1,style:{border:"none","margin-top":"20px"}},{default:i(()=>[l(y,null,{default:i(()=>[e("div",jt,[(_(!0),p(J,null,O(f,s=>(_(),p("div",{key:s.id},[l(k(Ne),{blocks:s,disabled:!0,isShow:!0,isExhibition:!0},null,8,["blocks"])]))),128))])]),_:1})]),_:1}),l(ye,{class:"dialogSyle",modal:"","close-on-click-modal":!1,modelValue:B.value,"onUpdate:modelValue":c[3]||(c[3]=s=>B.value=s),title:"下载选项",width:"500","align-center":"","destroy-on-close":"",onClose:X},{footer:i(()=>[e("div",Tt,[l(v,{type:"primary",onClick:he,size:"large",style:{width:"100%"}},{default:i(()=>[h(" 确定下载 ")]),_:1})])]),default:i(()=>[l(z,{column:1},{default:i(()=>[l(y,{label:"标题:"},{default:i(()=>{var s;return[h(o((s=t.value)==null?void 0:s.title),1)]}),_:1}),l(y,{label:"作者:"},{default:i(()=>{var s,g;return[h(o((g=(s=t.value)==null?void 0:s.template)==null?void 0:g.author),1)]}),_:1}),l(y,{label:"提交时间:"},{default:i(()=>{var s;return[h(o((s=t.value)==null?void 0:s.add_time),1)]}),_:1}),l(y,{label:"模板名称:"},{default:i(()=>{var s,g;return[h(o((g=(s=t.value)==null?void 0:s.template)==null?void 0:g.title),1)]}),_:1})]),_:1}),e("div",Rt,[e("div",zt,[Jt,l(E,{size:"large",modelValue:D.value,"onUpdate:modelValue":c[0]||(c[0]=s=>D.value=s),onChange:pe},{default:i(()=>[l(I,{value:!0,label:"全部字段下载"}),l(I,{value:!1,label:"部分字段下载"})]),_:1},8,["modelValue"])]),D.value?q("",!0):(_(),p("div",Ot,[Xt,l(fe,{modelValue:C.value,"onUpdate:modelValue":c[1]||(c[1]=s=>C.value=s)},{default:i(()=>[(_(!0),p(J,null,O(j.value,(s,g)=>(_(),p("div",{key:g,style:{"padding-left":"20px"}},[l(be,{label:s.Name,value:s.Name},null,8,["label","value"])]))),128))]),_:1},8,["modelValue"])])),e("div",Et,[Mt,l(E,{size:"large",modelValue:F.value,"onUpdate:modelValue":c[2]||(c[2]=s=>F.value=s)},{default:i(()=>[l(I,{label:"JSON",value:"JSON"}),l(I,{label:"XLSX",value:"XLSX"})]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])])}}}),Qt=ze(Gt,[["__scopeId","data-v-f49406b0"]]);export{Qt as default};
