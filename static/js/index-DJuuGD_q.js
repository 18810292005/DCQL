var y=(i,k,s)=>new Promise((c,g)=>{var v=o=>{try{f(s.next(o))}catch(m){g(m)}},p=o=>{try{f(s.throw(o))}catch(m){g(m)}},f=o=>o.done?c(o.value):Promise.resolve(o.value).then(v,p);f((s=s.apply(i,k)).next())});import{ai as j,av as P,d as H,i as r,j as Q,h as X,ak as A,r as d,X as G,o as V,k as J,b as h,e,w as n,f as u,H as K,a as O,t as B,u as W,ao as Y,F as Z,au as ee,aw as te,z as ae,s as le,v as ne,_ as se}from"./index-Dxllzmhq.js";import{t as oe}from"./index-DJyng-Qi.js";import"./setData-BXCfuNPN.js";const ie=i=>j.get("/api/v3/storage/snippets"+P(i)),re=i=>(le("data-v-d346e518"),i=i(),ne(),i),ue={class:"userTemplateFragments leftTable"},de=re(()=>h("div",{class:"userTemplateFragments-title pl_20"},[h("div",{class:"border4"}),h("div",{class:"title"},"我的模板片段")],-1)),ce=H({name:"userTemplateFragments",__name:"index",setup(i){const k=r([]),s=r(1),c=r(10),g=r(0),v=r(!1),p=(a=1)=>y(this,null,function*(){v.value=!0,s.value=a;let l=yield ie({page:s.value,page_size:c.value,title:b.title});l.code===0&&(k.value=l.data.results,g.value=l.data.total),v.value=!1}),f=a=>{c.value=a,p()},o=a=>{s.value=a,p(s.value)};Q(()=>{p()});const m=r(),b=X({title:""}),D=()=>{p()},S=a=>{a&&(a.resetFields(),o(1))},x=A(),I=()=>{x.push({name:"createTemplateManage",query:{type:"is_fragment"}})},M=a=>{x.push({name:"updateTemplateManage",query:{id:a.row.id,type:"is_fragment"}})},$=a=>y(this,null,function*(){ee.confirm("确定要删除该模板片段吗？","删除模板",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>y(this,null,function*(){te(a.row.id).then(l=>{ae({type:"success",message:"删除成功"}),o(1)})}))}),w=r(!1),z=r(),E=a=>y(this,null,function*(){w.value=!0,z.value=a.row.id});return(a,l)=>{const U=d("el-divider"),q=d("el-input"),T=d("el-form-item"),_=d("el-button"),L=d("el-form"),C=d("el-table-column"),N=d("el-pagination"),R=G("loading");return V(),J(Z,null,[h("div",ue,[de,e(U,{class:"bt_40"}),e(L,{ref_key:"conditionFormRef",ref:m,model:b,inline:!0,"label-width":"0",size:"large"},{default:n(()=>[e(T,{label:"",prop:"title"},{default:n(()=>[e(q,{modelValue:b.title,"onUpdate:modelValue":l[0]||(l[0]=t=>b.title=t),placeholder:"输入模板名称",style:{width:"283px"},clearable:""},null,8,["modelValue"])]),_:1}),e(T,{label:""},{default:n(()=>[e(_,{type:"primary",onClick:D},{default:n(()=>[u("查询")]),_:1}),e(_,{onClick:l[1]||(l[1]=t=>S(m.value))},{default:n(()=>[u("重置")]),_:1}),e(_,{plain:"",type:"primary",onClick:I},{default:n(()=>[u("新增")]),_:1})]),_:1})]),_:1},8,["model"]),K((V(),O(W(Y),{ref:"multipleTableRef",size:"large",class:"mb-20",data:k.value},{default:n(()=>[e(C,{label:"序号",type:"index",index:1,width:"60",align:"center"}),e(C,{label:"模板片段名称",align:"center"},{default:n(t=>[u(B(t.row.snippet_name),1)]),_:1}),e(C,{label:"上传时间",align:"center"},{default:n(t=>[u(B(t.row.add_time),1)]),_:1}),e(C,{label:"操作",width:"200",fixed:"right",align:"center"},{default:n(t=>[e(_,{link:"",type:"primary",size:"small",onClick:F=>M(t)},{default:n(()=>[u(" 修改 ")]),_:2},1032,["onClick"]),e(_,{link:"",type:"primary",size:"small",onClick:F=>E(t)},{default:n(()=>[u("查看")]),_:2},1032,["onClick"]),e(_,{link:"",type:"danger",size:"small",onClick:F=>$(t)},{default:n(()=>[u(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,v.value]]),e(N,{"current-page":s.value,"onUpdate:currentPage":l[2]||(l[2]=t=>s.value=t),"page-size":c.value,"onUpdate:pageSize":l[3]||(l[3]=t=>c.value=t),"page-sizes":[5,10,15,20],background:"",layout:"->,prev,pager,next,sizes,jumper,total",total:g.value,onSizeChange:f,onCurrentChange:o},null,8,["current-page","page-size","total"])]),e(oe,{modelValue:w.value,"onUpdate:modelValue":l[4]||(l[4]=t=>w.value=t),id:z.value,isFragment:!0},null,8,["modelValue","id"])],64)}}}),ve=se(ce,[["__scopeId","data-v-d346e518"]]);export{ve as default};
