var I=(d,r,m)=>new Promise((b,e)=>{var V=n=>{try{f(m.next(n))}catch(p){e(p)}},x=n=>{try{f(m.throw(n))}catch(p){e(p)}},f=n=>n.done?b(n.value):Promise.resolve(n.value).then(V,x);f((m=m.apply(d,r)).next())});import{d as R,aj as h,ak as k,j as q,i as A,h as U,r as _,o as C,k as S,e as l,w as a,f as y,s as E,v as F,b as g,_ as $}from"./index-Dxllzmhq.js";import{U as B}from"./setData-BXCfuNPN.js";import{r as N}from"./index-CAMo6DHZ.js";const j=d=>(E("data-v-e124a85d"),d=d(),F(),d),P={class:"updateAccount leftTable"},T=j(()=>g("div",{class:"updateAccount-title pl_20"},[g("div",{class:"border4"}),g("div",{class:"title"},"账号信息")],-1)),z=R({name:"updateAccount",__name:"updateAccount",setup(d){const r=h(),m=k();q(()=>{e.username=r.userInfo.username,e.role=B[r.userInfo.role],e.email=r.userInfo.email,e.institution=r.userInfo.institution,e.tel=r.userInfo.tel,e.real_name=r.userInfo.real_name});const b=A(),e=U({username:"",email:"",institution:"",role:"",tel:"",real_name:""}),f=U({real_name:[{required:!0,message:"真实姓名不能为空",trigger:"blur"}],institution:[{required:!0,message:"单位不能为空",trigger:"blur"}],tel:[{required:!0,message:"电话不能为空",trigger:"blur"},{validator:(c,t,s)=>{t&&(/^1[3-9]\d{9}$/.test(t)?s():s(new Error("电话号码格式不正确")))},trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{validator:(c,t,s)=>{t&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?s():s(new Error("邮箱格式不正确")))},trigger:"blur"}]}),n=c=>{c&&c.validate(t=>I(this,null,function*(){t&&(yield N(e.username,{institution:e.institution,email:e.email,real_name:e.real_name,tel:e.tel})).code===0&&(r.getUserInfo(),p())}))},p=()=>{m.push({name:"personalInformation"})};return(c,t)=>{const s=_("el-divider"),u=_("el-input"),i=_("el-form-item"),v=_("el-button"),w=_("el-form");return C(),S("div",P,[T,l(s,{class:"bt_40"}),l(w,{ref_key:"accountFormRef",ref:b,style:{"max-width":"500px",margin:"0 auto"},model:e,"status-icon":"",rules:f,"label-width":"auto",size:"large","label-suffix":":"},{default:a(()=>[l(i,{prop:"",label:"用户名"},{default:a(()=>[l(u,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=o=>e.username=o),label:"用户名",type:"text",autocomplete:"off",placeholder:"请输入用户名",disabled:""},null,8,["modelValue"])]),_:1}),l(i,{prop:"real_name",label:"真实姓名"},{default:a(()=>[l(u,{modelValue:e.real_name,"onUpdate:modelValue":t[1]||(t[1]=o=>e.real_name=o),type:"text",autocomplete:"off",placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),l(i,{prop:"",label:"权限"},{default:a(()=>[l(u,{modelValue:e.role,"onUpdate:modelValue":t[2]||(t[2]=o=>e.role=o),type:"text",autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1}),l(i,{prop:"institution",label:"单位"},{default:a(()=>[l(u,{modelValue:e.institution,"onUpdate:modelValue":t[3]||(t[3]=o=>e.institution=o),type:"text",autocomplete:"off",placeholder:"请输入单位名称"},null,8,["modelValue"])]),_:1}),l(i,{prop:"tel",label:"电话"},{default:a(()=>[l(u,{modelValue:e.tel,"onUpdate:modelValue":t[4]||(t[4]=o=>e.tel=o),type:"text",autocomplete:"off",placeholder:"请输入电话号码"},null,8,["modelValue"])]),_:1}),l(i,{prop:"email",label:"邮箱"},{default:a(()=>[l(u,{modelValue:e.email,"onUpdate:modelValue":t[5]||(t[5]=o=>e.email=o),type:"text",autocomplete:"off",placeholder:"请输入邮箱地址"},null,8,["modelValue"])]),_:1}),l(i,{label:"","label-width":"70px"},{default:a(()=>[l(v,{type:"primary",onClick:t[6]||(t[6]=o=>n(b.value))},{default:a(()=>[y(" 保存 ")]),_:1}),l(v,{onClick:p},{default:a(()=>[y("取消")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}}),J=$(z,[["__scopeId","data-v-e124a85d"]]);export{J as default};
