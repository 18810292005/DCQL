var x=(p,h,r)=>new Promise((a,u)=>{var _=i=>{try{f(r.next(i))}catch(m){u(m)}},c=i=>{try{f(r.throw(i))}catch(m){u(m)}},f=i=>i.done?a(i.value):Promise.resolve(i.value).then(_,c);f((r=r.apply(p,h)).next())});import{t as q}from"./index-739OTFba.js";import{r as E}from"./index-DPt70WPP.js";import{d as $,i as d,h as V,j as H,r as s,X as J,o as S,k as O,b as y,e,w as n,f as b,H as P,a as Q,u as X,ao as A,F as G,J as K,g as W,s as Y,v as Z,_ as ee}from"./index-Dxllzmhq.js";import{t as te}from"./index-DJyng-Qi.js";import"./setData-BXCfuNPN.js";const ae=p=>(Y("data-v-973eec59"),p=p(),Z(),p),le={class:"dataReview leftTable"},oe=ae(()=>y("div",{class:"userManagement-title pl_20"},[y("div",{class:"border4"}),y("div",{class:"title"},"模板管理")],-1)),ne=$({name:"dataReview",__name:"index",setup(p){const h=d(),r=d(0),a=V({page:1,page_size:10,title_or_abstract:"",category_id:void 0}),u=d(!1),_=V([]);function c(){u.value=!0,q(a).then(t=>{_.splice(0,_.length),Object.assign(_,t.data.results),r.value=t.data.count}).finally(()=>{u.value=!1})}const f=t=>{a.page_size=t,c()};function i(t){a.page=t,c()}const m=d(),z=d(),D=()=>x(this,null,function*(){let t=yield E();t.code===0&&(z.value=K(t.data))}),F=()=>{c()},R=t=>{t&&(t.resetFields(),c())};function T(){W.push({name:"userTemplate"})}const k=d(!1),C=d();function I(t){k.value=!0,C.value=t.id}return H(()=>{c(),D()}),(t,l)=>{const L=s("el-divider"),U=s("el-input"),w=s("el-form-item"),B=s("el-tree-select"),v=s("el-button"),j=s("el-form"),g=s("el-table-column"),M=s("el-pagination"),N=J("loading");return S(),O(G,null,[y("div",le,[oe,e(L,{class:"bt_40"}),e(j,{ref_key:"conditionFormRef",ref:m,model:a,inline:!0,"label-width":"0",size:"large"},{default:n(()=>[e(w,{label:"",prop:"title_or_abstract"},{default:n(()=>[e(U,{modelValue:a.title_or_abstract,"onUpdate:modelValue":l[0]||(l[0]=o=>a.title_or_abstract=o),placeholder:"输入模板名称",style:{width:"283px"},clearable:""},null,8,["modelValue"])]),_:1}),e(w,{label:"",prop:"category_id"},{default:n(()=>[e(B,{filterable:"",modelValue:a.category_id,"onUpdate:modelValue":l[1]||(l[1]=o=>a.category_id=o),data:z.value,style:{width:"283px"},"check-on-click-node":"","check-strictly":"",placeholder:"请选择分类"},null,8,["modelValue","data"])]),_:1}),e(w,{label:""},{default:n(()=>[e(v,{type:"primary",onClick:F},{default:n(()=>[b("查询")]),_:1}),e(v,{onClick:l[2]||(l[2]=o=>R(m.value))},{default:n(()=>[b("重置")]),_:1}),e(v,{plain:"",type:"primary",onClick:T},{default:n(()=>[b("我的模板")]),_:1})]),_:1})]),_:1},8,["model"]),P((S(),Q(X(A),{ref_key:"multipleTableRef",ref:h,size:"large",data:_,class:"mb-20",style:{width:"100%"}},{default:n(()=>[e(g,{label:"序号",type:"index",index:1,width:"60",align:"center"}),e(g,{label:"材料分类",prop:"category_name",align:"center"}),e(g,{label:"模板名称",prop:"title",align:"center"}),e(g,{label:"摘要","show-overflow-tooltip":"",prop:"abstract",align:"center"}),e(g,{label:"创建时间",prop:"pub_date",width:"170",align:"center"}),e(g,{label:"操作",width:"80",align:"center",fixed:"right"},{default:n(o=>[e(v,{link:"",type:"primary",size:"small",onClick:ie=>I(o.row)},{default:n(()=>[b("查看")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[N,u.value]]),e(M,{"current-page":a.page,"onUpdate:currentPage":l[3]||(l[3]=o=>a.page=o),"page-size":a.page_size,"onUpdate:pageSize":l[4]||(l[4]=o=>a.page_size=o),"page-sizes":[5,10,15,20],background:"",layout:"->,prev,pager,next,sizes,jumper,total",total:r.value,onSizeChange:f,onCurrentChange:i},null,8,["current-page","page-size","total"])]),e(te,{modelValue:k.value,"onUpdate:modelValue":l[5]||(l[5]=o=>k.value=o),id:C.value},null,8,["modelValue","id"])],64)}}}),_e=ee(ne,[["__scopeId","data-v-973eec59"]]);export{_e as default};
