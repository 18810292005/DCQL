var x=(p,u,d)=>new Promise((_,o)=>{var v=a=>{try{i(d.next(a))}catch(n){o(n)}},g=a=>{try{i(d.throw(a))}catch(n){o(n)}},i=a=>a.done?_(a.value):Promise.resolve(a.value).then(v,g);i((d=d.apply(p,u)).next())});import{d as C,aj as B,ak as M,i as P,h as U,r as w,o as S,k as q,e as s,w as l,u as y,f as h,au as F,s as E,v as N,b,_ as R}from"./index-Dxllzmhq.js";import{a as T}from"./index-CAMo6DHZ.js";const I=p=>(E("data-v-b56bcbba"),p=p(),N(),p),$={class:"passwordUpdate leftTable"},j=I(()=>b("div",{class:"passwordUpdate-title pl_20"},[b("div",{class:"border4"}),b("div",{class:"title"},"修改账号信息")],-1)),z=I(()=>b("div",{style:{color:"#dd2c2c"}}," 注：密码至少3个字符以上，由英文、数字或标点组成，不允许空格 ",-1)),A=C({name:"passwordUpdate",__name:"passwordUpdate",setup(p){const u=B(),d=M(),_=P(),o=U({password:"",old_password:"",password2:""}),i=U({old_password:[{required:!0,message:"当前密码不能为空",trigger:"blur"}],password:[{required:!0,message:"新密码不能为空",trigger:"blur"},{validator:(m,e,r)=>{e&&(e!==o.password2&&r(new Error("两次输入的密码不一致")),r())},trigger:"blur"}],password2:[{required:!0,message:"再次新密码不能为空",trigger:"blur"},{validator:(m,e,r)=>{e&&(e!==o.password&&r(new Error("两次输入的密码不一致")),r())},trigger:"blur"}]}),a=m=>{m&&m.validate(e=>x(this,null,function*(){e&&(yield T({password:o.password,old_password:o.old_password})).code===0&&F.alert("密码已重置，请重新登录","温馨提示",{confirmButtonText:"重新登录",callback:()=>{u.logoutConfirm(),d.push({name:"home"})}})}))},n=()=>{d.push({name:"personalInformation"})};return(m,e)=>{const r=w("el-divider"),c=w("el-input"),f=w("el-form-item"),V=w("el-button"),k=w("el-form");return S(),q("div",$,[j,s(r,{class:"bt_40"}),s(k,{ref_key:"passwordFormRef",ref:_,style:{"max-width":"510px",margin:"0 auto"},model:o,"status-icon":"",rules:i,"label-width":"auto",size:"large","label-suffix":":"},{default:l(()=>[s(f,{prop:"",label:"用户名"},{default:l(()=>[s(c,{modelValue:y(u).userInfo.username,"onUpdate:modelValue":e[0]||(e[0]=t=>y(u).userInfo.username=t),modelModifiers:{trim:!0},label:"用户名",type:"text",autocomplete:"off",placeholder:"请输入用户名",disabled:""},null,8,["modelValue"])]),_:1}),s(f,{prop:"old_password",label:"当前密码"},{default:l(()=>[s(c,{modelValue:o.old_password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.old_password=t),modelModifiers:{trim:!0},type:"password",autocomplete:"off",placeholder:"请输入当前密码"},null,8,["modelValue"])]),_:1}),s(f,{prop:"password",label:"新密码"},{default:l(()=>[s(c,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.password=t),modelModifiers:{trim:!0},type:"password",autocomplete:"off",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),s(f,{prop:"password2",label:"确认新密码"},{default:l(()=>[s(c,{modelValue:o.password2,"onUpdate:modelValue":e[3]||(e[3]=t=>o.password2=t),modelModifiers:{trim:!0},type:"password",autocomplete:"off",placeholder:"请输入再次新密码"},null,8,["modelValue"]),z]),_:1}),s(f,{label:"","label-width":"70px"},{default:l(()=>[s(V,{type:"primary",onClick:e[4]||(e[4]=t=>a(_.value))},{default:l(()=>[h(" 保存 ")]),_:1}),s(V,{onClick:n},{default:l(()=>[h("取消")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}}),J=R(A,[["__scopeId","data-v-b56bcbba"]]);export{J as default};
