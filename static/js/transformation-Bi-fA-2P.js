var A=Object.defineProperty,j=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;var m=(l,e,n)=>e in l?A(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,f=(l,e)=>{for(var n in e||(e={}))_.call(e,n)&&m(l,n,e[n]);if(p)for(var n of p(e))d.call(e,n)&&m(l,n,e[n]);return l},c=(l,e)=>j(l,O(e));import{a3 as u,N as x}from"./index-Dxllzmhq.js";function i(l,e){for(const n in l){let t=l[n];if(t.type=="e_update"){console.log("执行");let s=t.storageData.map(r=>r.fileAddress);e[t.style.name]=s}else if(t.key=="array")e[t.style.name]=[],e[t.style.name]=v(t,e[t.style.name]);else if(t.key=="shengcheng"){let s=l[n].childern.find(r=>r.style.name===t.storageData);e[t.style.name]={},e[t.style.name]=i([s],e[t.style.name])}else t.key=="table"?(e[t.style.name]=[],e[t.style.name]=b(t,e[t.style.name])):t.type!=="e_flex"?e[t.style.name]=t.storageData:t.type==="e_flex"&&(e[t.style.name]={},e[t.style.name]=i(t.childern,e[t.style.name]))}return e}function b(l,e){for(const n in l.storageData){let t=l.storageData[n],s={};s=i(t,s),e[n]=s}return e}function v(l,e){for(const n in l.childern){let t=l.childern[n],s={};if(t.type=="e_update"){let r=t.storageData.map(y=>y.fileAddress);e[n]=r}else if(t.type!=="e_flex")e[n]=t.storageData;else if(t.key=="table"){let r=[];e[n]=b(t,r)}else e[n]=i(t.childern,s)}return e}const o=(l,e,n)=>{console.log(l);for(const t in l){let s=l[t],r=n[t];if(Object.prototype.hasOwnProperty.call(e,s.style.name)){if(s.key=="shengcheng"){debugger;const y=Object.keys(e[s.style.name])[0];r.storageData=y}if(s.type=="e_update"){let y=e[s.style.name].map(a=>{let h=a.split("/");return{name:h[h.length-1],fileAddress:a,url:""+a,isUpdate:!0,percentage:100}});r.storageData=y}else if(s.key=="array")w(s.childern[0],e[s.style.name],r);else if(s.key=="table")D(l[t],e[s.style.name],r);else if(s.type!=="e_flex")console.log(e[s.style.name],e,"内容"),r.storageData=e[s.style.name]?e[s.style.name]:"";else if(s.type==="e_flex"){let y=[];y=l[t].childern.map(a=>u(c(f({},a),{childern:[]}))),r.childern=y,o(l[t].childern,e[s.style.name],r.childern)}}}};function D(l,e,n){n.storageData=[];for(const t in e){let s=u(f({},l.childern)),r=e[t];n.storageData.push(s),o(s,r,n.storageData[t])}}function w(l,e,n){for(const t in e){let s=e[t];if(n.childern.push(u(c(f({},l),{formId:x(20)}))),l.type=="e_update"){let r=s.map(y=>{let a=y.split("/");return{name:a[a.length-1],fileAddress:y,url:""+y,isUpdate:!0,percentage:100}});n.childern[t].storageData=r}else l.key==="table"?D(l,s,n.childern[t]):l.childern.length>0?(console.log(l,"data"),o(l.childern,s,n.childern[t].childern)):n.childern[t].storageData=s}}function k(l){if(console.log(l),l==null||l==null||l=="")return!0;if(Object.prototype.toString.call(l)==="[object Object]"){console.log(Object.keys(l));for(const e in Object.keys(l))if(l[Object.keys(l)[e]]==null||l[Object.keys(l)[e]]==null||l[Object.keys(l)[e]]=="")return!0}else if(Object.prototype.toString.call(l)==="[object Array]"&&l.length==0)return!0;return!1}const g=l=>{for(let e=0;e<l.length;e++){if(l[e].style.required&&l[e].type!=="e_flex"&&k(l[e].storageData)||l[e].key=="shengcheng"&&k(l[e].storageData))return l[e];if(l[e].key=="shengcheng"){let n=l[e].childern.find(s=>s.style.name===l[e].storageData);console.log(n);let t=g([n]);if(t)return t}else if(l[e].childern&&l[e].childern.length>0)if(l[e].key=="table")for(const n in l[e].storageData){let t=g(l[e].storageData[n]);if(t)return t}else{let n=g(l[e].childern);if(n)return n}}return!1};export{o as a,g as c,i as t};
